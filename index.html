<!DOCTYPE html>
<html>
<head>
    <title>Spotify User Profile</title>
</head>
<body>
    <h1>Spotify User Profile</h1>
    <button id="login-button">Log in with Spotify</button>
    <div id="user-profile"></div>
    <script>
        const clientId = 'YOUR_CLIENT_ID';
        const redirectUri = 'YOUR_GITHUB_PAGES_URL';
        const authEndpoint = 'https://accounts.spotify.com/authorize';
        const scopes = ['user-read-private', 'user-read-email'];

        document.getElementById('login-button').addEventListener('click', function() {
            window.location = `${authEndpoint}?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${scopes.join('%20')}&response_type=token&show_dialog=true`;
        });

        function getHashParams() {
            var hashParams = {};
            var e, r = /([^&;=]+)=?([^&;]*)/g,
                q = window.location.hash.substring(1);
            while ( e = r.exec(q)) {
               hashParams[e[1]] = decodeURIComponent(e[2]);
            }
            return hashParams;
        }

        const params = getHashParams();

        if (params.access_token) {
            fetch('https://api.spotify.com/v1/me', {
                headers: {
                    'Authorization': `Bearer ${params.access_token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('user-profile').innerHTML = `
                    <h2>User Information</h2>
                    <p>Display Name: ${data.display_name}</p>
                    <p>Email: ${data.email}</p>
                    <p>Country: ${data.country}</p>
                `;
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
